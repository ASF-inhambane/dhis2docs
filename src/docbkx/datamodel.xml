<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
                         "http://www.docbook.org/xml/4.5/docbookx.dtd">
<article>
    <title>Data Model Revision</title>
    <subtitle>A fresh look at dimensions</subtitle>
    <sect1>
        <title>Background</title>
        <para> The question of multi-dimensional data in DHIS2 has been recently thrown back into
            relief by a number of emerging use cases. The discussion which was started on the
            mailing list by Jason Pickering turned into a very long thread which you can read the
            archive <ulink url="https://lists.launchpad.net/dhis2-devs/msg02138.html">here</ulink>. </para>
        <para> What emerged in this discussion is that the current implementation of dimensional
                <code>dataelements</code> through <code>categorycombo/category/categoryoption</code>
            serves a useful purpose for data input but there are areas where it can be optimized and
            made more accessible for analysis and reporting. Similarly the existing model of
                <code>dataelementgroups</code> and <code>indicatorgroups</code>was identified as
            requiring expanding in order to provide flexible mult-dimensionality in analysis and
            reporting. </para>
        <para> The proposed resolution to these issues tries to take into account existing best
            practice from within DHIS as well as other communities such as the <ulink
                url="http://groups.google.com/group/sdmx_hd">SDMX HD</ulink> group within WHO. There
            has also been a conscious effort to add functionality through simplifying and
            harmonising wherever possible, rather than by adding complexity. </para>
        <para>The draft proposal here is authored by myself and Lars, but is really a synthesis of a
            great number of inputs from the likes of Jason, Abyot, Ola, Knut and Johan. It is a
            living document and will be updated as the implementation details settle. </para>
    </sect1>
    <sect1>
        <title>The status quo</title>
        <para>Text</para>
    </sect1>
    <sect1>
        <title>Proposed Resolution</title>
        <sect2>
            <title>Guiding Principles</title>
            <para>
                <itemizedlist>
                    <listitem>
                        <para><emphasis role="bold">DataElements</emphasis> can be assigned to zero
                            or more <emphasis role="bold">Groups</emphasis></para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">Indicators</emphasis> can be assigned to zero or
                            more <emphasis role="bold">Groups</emphasis></para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">Groups</emphasis> can be assigned to <emphasis
                                role="bold">Groupset</emphasis></para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">Dimensions</emphasis> are attributes of a
                            measure (<emphasis role="bold">datavalue</emphasis> or <emphasis
                                role="bold">indicator value</emphasis>) rather than of a <emphasis
                                role="bold">dataelement</emphasis> or <emphasis role="bold"
                                >indicator</emphasis></para>
                    </listitem>
                    <listitem>
                        <para>All <emphasis role="bold">Datavalues</emphasis> have at least three
                            compulsory <emphasis role="bold">Dimensions</emphasis> - orgunit, period
                            and dataelement. They may have additional <emphasis role="bold"
                                >dimensions</emphasis>.</para>
                    </listitem>
                    <listitem>
                        <para><emphasis role="bold">DataValues</emphasis> should have a method
                                <emphasis role="italic">getDimensions()</emphasis> which returns a a
                            map of its <emphasis role="bold">dimensions</emphasis> and <emphasis
                                role="bold">dimension values</emphasis>, including source, period
                            and datelement.</para>
                    </listitem>
                    <listitem>
                        <para>A set of <emphasis role="bold">Groupsets</emphasis> may be assigned to
                            a new <emphasis role="bold">Indicator</emphasis> or <emphasis
                                role="bold">Dataelement</emphasis>. Values with this <emphasis
                                role="bold">dataelement</emphasis> or <emphasis role="bold"
                                >indicator dimension</emphasis> will have additional <emphasis
                                role="bold">dimensions</emphasis>; one <emphasis role="bold"
                                >dimension</emphasis> for each <emphasis role="bold"
                                >groupset</emphasis> with a <emphasis role="bold"
                                >dimension</emphasis> value equal to the corresponding group name.
                        </para>
                    </listitem>
                    <listitem>
                        <para>A <emphasis role="bold">DataValue</emphasis> may have additional
                            dimensions by virtue of its <emphasis role="bold"
                                >CategoryComboOption</emphasis>. In this case a call to <emphasis
                                role="italic">getDimensions</emphasis>() will return these
                            additional dimensions, one <emphasis role="bold">dimension</emphasis>
                            for each <emphasis role="bold">category</emphasis> with dimension value
                            equal to the corresponding <emphasis role="bold"
                                >categoryOption</emphasis>.</para>
                    </listitem>
                    <listitem>
                        <para>The available GroupSet names shall be coincident with the available
                            Category names and codes.  There will be one table in the database for
                            these..</para>
                    </listitem>
                    <listitem>
                        <para>The available Group names shall be coincident with the available
                            CategoryOptions.  There will be one table in the database for
                            these..</para>
                    </listitem>
                    <listitem>
                        <para>CategoryOptions shall be grouped by Category. It is however possible
                            that a CategoryOption may appear in more than one Category</para>
                    </listitem>
                </itemizedlist>
            </para>
        </sect2>
    </sect1>
</article>
