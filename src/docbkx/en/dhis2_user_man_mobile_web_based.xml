<?xml version='1.0' encoding='UTF-8'?>
<!-- This document was created with Syntext Serna Free. --><!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN" "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd" []>
<section>
  <title>Web based mobile solution</title>
  <para>The web based solution has two distinct two parts: Facility reporting, for data entry and
    reporting of regular DHIS2 aggregate data, and Activity reporting, for supporting individual
    activity reporting with the Community module.</para>
  <para>The solution relies on the mobile phone having a data connection available (i.e.
    GPRS, Edge, 3G), over which it communicates with a DHIS2 instance being publicly
    available on the internet, as any other web client. The application downloads the forms to be reported from the
    server, and the forms can therefore be updated without installing a new application. This is also a crucial feature 
    for community reporting, which relies on regularly downloading activity plans from the server.
    </para>
  <section>
    <title>Data connection availability</title>
    <para>Data connection availability can be a problem in many of the contexts where DHIS2 mobile
      reporting would otherwise be a good solution for getting data directly into DHIS2. If that is
      the case for you, you might want to consider trying the SMS based solution for now.
      But keep in mind that even though a data connection is currently required for communication between
      the server and the mobile phone, it is only required when initializing or updating the mobile
      application and when sending reports to the server. The phone stores all entered data locally,
      so it it can work fine with only temporary access to a data connection on a regular basis.
    </para>
  </section>
  <section>
    <title>Server side setup for facility reporting</title>
    <para>The server side component of the web based solution is just regular web application functionality, 
    and it is included in the general build of DHIS2 (the web api itself is in the dhis-web-api module)</para>
    <itemizedlist>
      <title>To try out the facility reporting, perform these steps on the server</title>
      <listitem>
        <para>
          Set the &quot;Available for Mobile Reporting&quot; flag for the data sets you want reported:
          Under <emphasis>Maintenance, DataSet</emphasis>, edit the data set you want, 
          mark the “Available for Mobile Reporting” check box and save.
        </para>
      </listitem>
      <listitem>
        <para>Make sure the user that you want to log in as is associated to one (and
          only one)
          organizational unit has the &quot;mobile&quot; datasets assigned.</para>
      </listitem>
      <listitem>
        <para>That was all, go see if you can get the mobile working.</para>
      </listitem>
    </itemizedlist>
  </section>
  <section>
    <title>A little detail</title>
    <para>Though the previous steps is all that should be needed for testing the solution,
      there are of course some more things you want to know about the server setup.</para>
    <section>
      <title>The mapping of data sets to form layout on the phone</title>
      <para>By default a data set is mapped to one large form on the phone.
        If the data set is divided into sections, each section is a form page.
        If a data element has more than one category option combo it will be displayed as a heading with the combos
        following.</para>
      <table border="2">
        <caption>Names for form elements are derived in the following way</caption>
        <tr>
          <td>Form name</td>
          <td>Data set</td>
          <td>ShortName if it exists, otherwise name</td>
        </tr>
        <tr>
          <td>Page name</td>
          <td>Section</td>
          <td>Section name (or form name if no sections)</td>
        </tr>
        <tr>
          <td>Question name (heading if combos)</td>
          <td>Data element </td>
          <td>alternativeName if it exists, otherwise name</td>
        </tr>
        <tr>
          <td>Question name if combos</td>
          <td>Category option combo</td>
          <td>name</td>
        </tr>
      </table>
    </section>
    <section>
      <title>Sorting of forms</title>
      <para>By default, data elements will be sorted according to the global sorting assigned in DHIS2. If sections are used, their sorting will be used.
      In some cases, when sections are not used, a data element might be used in multiple data sets, and conflict in the way it should be sorted in individual data sets. A work around for this situation is to wrap the whole dataset in one section (note that this will only work if the data elements have the same category option combo)</para>
    </section>
    <section>
      <title>Versioning of data sets</title>
      <para>To make it possible to compare and update the data sets on the mobile phone with the 
        version on the server, data sets are automatically versioned when you edit the data set structure.</para>
      <itemizedlist>
        <title>Changes that currently trigger a new data set version</title>
        <listitem>
          <para>Create DataSet</para>
        </listitem>
        <listitem>
          <para>Edit DataSet</para>
        </listitem>
        <listitem>
          <para>Create/edit/delete Section in DataSet</para>
        </listitem>
        <listitem>
          <para>Sort Section Order</para>
        </listitem>
        <listitem>
          <para>Update DataElement (affect many related DataSets)</para>
        </listitem>
        <listitem>
          <para>Delete DataElement (affect many related DataSets)</para>
        </listitem>
        <listitem>
          <para>Edit DataElement Category</para>
        </listitem>
        <listitem>
          <para>Edit DataElement Category Combo</para>
        </listitem>
      </itemizedlist>
    </section>
    <section>
      <title>Language support</title>
      <para>Language support for the form contents is not fully supported yet, as of the current
        version (?)</para>
    </section>
  </section>
  <section>
    <title>Mobile application setup</title>
    <para/>
    <section>
      <title>Installation and initialization</title>
      <section>
        <title>Installation</title>
      </section>
      <section>
        <title>Initialization</title>
        <para>Initialization is executed before mobiles delivered to Health Workers and it is only required once. For Health Worker, first screen after start application is PIN form. In case of delivering mobile to other Health Worker (other organisation unit), reinitialization function will clear all data. </para>
        <para>There are four steps:</para>
        <orderedlist>
          <listitem>
            <para>Login to Application: </para>
            <para>Through this setp, the mobile&apos;s user is definied. One mobile is only registered for one Health Worker. We login with the Health Worker&apos;s username in DHIS System. The mobile only download the forms that assigned to the Health Worker in DHIS System.</para>
            <para>Required fields: Username, Password, Server Localtion - URL of DHIS System. All fields are required.</para>
            <para>After filling all fields, push &quot;Login&quot;. If there is confirmation of access the restricted API, push &quot;Yes&quot;</para>
            <para><emphasis role="underline">Error:</emphasis></para>
            <para><itemizedlist>
                <listitem>
                  <para>Connection Not Found: the Server Location is incorrect</para>
                </listitem>
                <listitem>
                  <para>Invalid User Name Or Password: the username or password is incorrect</para>
                </listitem>
                <listitem>
                  <para>Application not authorized to access restricted API: user push &quot;No&quot; at the comfirmation of access the restricted API after push &quot;Login&quot;.</para>
                </listitem>
              </itemizedlist> </para>
          </listitem>
          <listitem>
            <para>Set default PIN: PIN is 4-digit number which is used to protect application from unauthorized access. This PIN is required and persistent. It will be delivered to Health Worker with mobile.</para>
            <para>After input PIN, push &quot;Next&quot;</para>
          </listitem>
          <listitem>
            <para>Download all Forms: After input PIN, all forms will be download and display.</para>
            <para>If the Health Worker is responsible for Facility Reporting, the list of forms is displayed.</para>
            <para>If the Health Worker is responsible for Community Reporting, the list of activity is displayed.</para>
            <para><emphasis role="underline">Notes</emphasis>: If the Health Worker is responsible for both Facility Reporting and Community Reporting, DHIS server will send all forms of both Facility Reporting and Community Reporting to mobile and on mobile, there will be a screen to choose whether displaying Facility Reporting or Community Reporting.</para>
            <para><emphasis role="underline">Errors</emphasis>:</para>
          </listitem>
        </orderedlist>
      </section>
    </section>
    <section>
      <title>Logging in (for regular use)</title>
      <para>After starting the application, the PIN form is displayed</para>
      <itemizedlist>
        <listitem>
          <para>PIN: 4-digit number provided with mobile.</para>
        </listitem>
        <listitem>
          <para>Reinitialize Command: this function will clear all data on mobile and we start from the login screen with username and password.</para>
        </listitem>
        <listitem>
          <para>Errors: Invalid PIN</para>
        </listitem>
      </itemizedlist>
    </section>
    <section>
      <title>Facility Reporting Module</title>
      <section>
        <title>Regular Use</title>
        <orderedlist>
          <listitem>
            <para>Choosing forms</para>
          </listitem>
          <listitem>
            <para>Choosing period: Push &quot;Open&quot; to display list of period and push &quot;Next&quot;</para>
          </listitem>
          <listitem>
            <para>Fill in values: After choosing period, the form is displayed in two way.</para>
            <itemizedlist>
              <listitem>
                <para>Form with section (DataSet with Section)</para>
                <para>Each Section is displayed in one screen with title is section&apos;s name.</para>
                <para>To move among screen, push &quot;Next&quot;.</para>
              </listitem>
              <listitem>
                <para>Form without section (DataSet without Section)</para>
                <para>All fields are displayed on one screen with the title that is the name of DataSet</para>
              </listitem>
            </itemizedlist>
          </listitem>
          <listitem>
            <para>Save and Complete:</para>
            <para>After finishing, there are two options. Save is locally storing the values on mobile. Complete is storing the values on mobile and sending the values to DHIS server. Completing form will make it uneditable for the next view.</para>
          </listitem>
        </orderedlist>
      </section>
      <section>
        <title>Notes</title>
        <orderedlist>
          <listitem>
            <para>Period list:</para>
            <para>Period with (*) is the period that is completed (the form for that period is filled and completed).</para>
            <para>The list of period also present the forms are currently stored on mobile. All periods that are not in period list are considered old  and will be deleted automatically.</para>
          </listitem>
          <listitem>
            <para>Storing values duration</para>
            <para>The number of saved forms on mobile are unlimited.
</para>
            <para>Forms are saved for limited period. This is the storing period for differents form’s types</para>
            <itemizedlist>
              <listitem>
                <para>Daily Forms: 2 months (current and previous month)</para>
              </listitem>
              <listitem>
                <para>Weekly Forms: 4 weeks (current and 3 previous week)</para>
              </listitem>
              <listitem>
                <para>Monthly Forms: 2 months (current and previous month)</para>
              </listitem>
              <listitem>
                <para>Quarterly Forms: 2 quarters (current and previous quarter)</para>
              </listitem>
              <listitem>
                <para>Yearly Forms: 2 years (current and previous year)</para>
              </listitem>
            </itemizedlist>
          </listitem>
          <listitem>
            <para>Completed forms - Uneditable forms</para>
            <para>Form has been completed is displayed as uneditable form for next </para>
          </listitem>
          <listitem>
            <para>Re-Edit completed forms</para>
            <para>Even after complete form, HW are able to edit the value and resend (complete form) to server with the condition that certain pair of DataSet and Period is not locked.</para>
          </listitem>
          <listitem>
            <para>Update Forms:</para>
            <para>This function is used to synchronize the forms on mobile and on server. </para>
            <para>On the list of forms, push &quot;Update report forms&quot; to update.</para>
          </listitem>
        </orderedlist>
      </section>
    </section>
    <section>
      <title>Community Reporting</title>
      <section>
        <title>Regular Use</title>
        <orderedlist>
          <listitem>
            <para>Activity Main Menu</para>
            <para><graphic fileref="resources/images/dhis_mobile/activity_main_menu.png" align="center"/></para>
            <para><itemizedlist>
                <listitem>
                  <para>Current Activity Plan: contain all new Activities that need to be complete.</para>
                </listitem>
                <listitem>
                  <para>Completed Activity Plan: contain all the activities that have been completed and sent to server. This list is for review only.</para>
                </listitem>
                <listitem>
                  <para>Update Activity Plan: update the list of new Activities.</para>
                </listitem>
                <listitem>
                  <para>Update Program Form: synchronize the Program form structure between server and mobile client.</para>
                </listitem>
              </itemizedlist></para>
          </listitem>
          <listitem>
            <para>Choose Village</para>
            <para><graphic fileref="resources/images/dhis_mobile/choose_village.png" align="center"/></para>
            <para>From Activity main menu, select “Current Activity Plan”. You will be navigated to “Grampanchayat Name” screen where you can select the village. Use the “Up” or “Down” button on your mobile phone to focus on a village. Use “Select” button to select a village.</para>
          </listitem>
          <listitem>
            <para>Choose Activity</para>
            <para><graphic fileref="resources/images/dhis_mobile/choose_activity.png" align="center"/></para>
            <para>Each Activity is represented by the name of the Beneficiary.  Select the name of the beneficiary you want to view. Note that the name start with “*” means that this is a late Activity.</para>
          </listitem>
          <listitem>
            <para>Beneficiary Detail</para>
            <para><graphic fileref="resources/images/dhis_mobile/beneficiary_detail_screen.png" align="center"/></para>
            <para>After you select an activity, a Beneficiary Detail screen will be displayed.  The detail screen may contain personal information and some additional information of the Beneficiary (depends on the setting from server). Select “OK” to go to the Entry screen.</para>
          </listitem>
          <listitem>
            <para>Fill in values (Entry screen)</para>
            <para><graphic fileref="resources/images/dhis_mobile/fill_in_values.png" align="center"/></para>
            <para>On the top of the screen is the name of the Program Stage. Below is the form, a form include many fields for user to input data. Focus on a field by press the “Up” or “Down” button on your mobile phone. After the field is focused, you can start entering data. Press the “Up” or “Down” button to go to the next field. At the bottom is the menu with &quot;Save&quot;, &quot;Complete&quot; and &quot;Back&quot; command. </para>
            <para><graphic fileref="resources/images/dhis_mobile/popup_window.png" align="center"/></para>
            <para><emphasis role="bold">*Notes:</emphasis><itemizedlist>
                <listitem>
                  <para>For the field with Yes/No value: press the select button on a focused field to open the popup menu then you can select “Yes”, “No” or “Select Option”. Select “Select Option” means that you have no data for that field.</para>
                </listitem>
                <listitem>
                  <para>For the field with pre-suggested values: press the select button to open the popup menu then you can choose one of the options. Select “Select Option” means that you have no data for that field..</para>
                </listitem>
                <listitem>
                  <para>For date-type field: the input format is [date]-[month]-[year].</para>
                </listitem>
              </itemizedlist></para>
          </listitem>
          <listitem>
            <para>Saving/Completing.</para>
            <para>After finish step [4], you can choose either “Save” or “Complete” to finish your work.<itemizedlist>
                <para><graphic fileref="resources/images/dhis_mobile/save_command.png" align="center"/></para>
                <listitem>
                  <para><emphasis role="bold">Save</emphasis>: you may want to use this option if you have not finished your work yet and you want to store the data to continue later.<itemizedlist>
                      <listitem>
                        <para>Select “Menu” or “Option” at the bottom of your screen (The name “Menu” or “Option” depend on your mobile phone) and then select “Save”. A success message (“Form Saved”) will be display. Select “Done” or “Dismiss” to go back to Entry Screen.</para>
                      </listitem>
                      <listitem>
                        <para>Your data will not be sent to server. It is stored in the Record Store of your mobile phone. To see the data again. Go back to step [2] and select the name of the Beneficiary that you have just entered data. Repeat step [3] and [4]. If you feel that you are ready to send data to server. Select “Complete”.</para>
                      </listitem>
                    </itemizedlist></para>
                  <para><graphic fileref="resources/images/dhis_mobile/complete_command.png" align="center"/></para>
                </listitem>
                <listitem>
                  <para><emphasis role="bold">Complete</emphasis>: you may use this option when you fill the entire field on the form and make sure that your data is correct.
      </para>
                  <para><itemizedlist>
                      <listitem>
                        <para>Select “Menu” or “Option” at the bottom of your screen (The name “Menu” or “Option” depend on your mobile phone) and then select “Complete”. </para>
                      </listitem>
                      <listitem>
                        <para>If you did not fill all the field in the form, a warning message will be display “x fields is not filled. Do you want to complete anyway?” With x is the number of empty field(s). Select “Yes” if you want to send data to server, select “No”, if you do not want to send and go back to Entry screen again. </para>
                      </listitem>
                      <listitem>
                        <para>After select “Yes”, a security message will appear and inform that the application will connect to server. Select “Yes” to give the permission for the application to do so.</para>
                        <para><graphic fileref="resources/images/dhis_mobile/security_message.png" align="center"/></para>
                      </listitem>
                      <listitem>
                        <para>User will receive a success message: “Activity uploaded successfully”.</para>
                        <para><graphic fileref="resources/images/dhis_mobile/success_message.png" align="center"/></para>
                      </listitem>
                      <listitem>
                        <para>A finished activity (activity that is completed and data is send to server) will be move to &quot;Completed Activity&quot; and it will be display as &quot;Uneditable Form&quot;. User can go to &quot;Completed Activity&quot; at &quot;Activity Main Menu&quot; to review.</para>
                      </listitem>
                    </itemizedlist></para>
                </listitem>
              </itemizedlist></para>
          </listitem>
        </orderedlist>
      </section>
      <section>
        <title>Updating Activity Plan</title>
        <para>After one year, month or week, new Activities may automatically generated from server. In order to update these new Activities to mobile client, the following process is required.</para>
        <para><graphic fileref="resources/images/dhis_mobile/update_activity_plan_command.png" align="center"/></para>
        <orderedlist>
          <listitem>
            <para>Select “Update Activity Plan”</para>
            <para>From Activity Main Menu, select “Update Activity Plan”. </para>
          </listitem>
          <listitem>
            <para>Please wait</para>
            <para>A wait screen will be displayed with a message “Please wait”. </para>
          </listitem>
          <listitem>
            <para>Success Message</para>
            <para>“Update Completed” message will appear on the screen after the update process finish. Select ”Dismiss” to close this window and go back to Activity Main Menu. Your Current Activity Plan is now updated.</para>
          </listitem>
        </orderedlist>
      </section>
      <section>
        <title>Updating Program Form</title>
        <para>For various reasons, some times the Program Stage Form may be changed by server admin (add or remove some data element). In that case, you need to run the “Update Program Form” function in order to synchronize the form structure between server and mobile client. </para>
        <para><graphic fileref="resources/images/dhis_mobile/update_program_form_command.png" align="center"/></para>
        <orderedlist>
          <listitem>
            <para>Select “Update Program Form”</para>
            <para>Form Activity Main Menu selects “Update Program Form”.</para>
          </listitem>
          <listitem>
            <para>Success Message</para>
            <para>“Update completed” message will appear on the screen. Select “Dismiss” to close this window and go back to Activity Main Menu. All of your Program Stage Form on your mobile phone is now updated.</para>
          </listitem>
        </orderedlist>
        <para><emphasis role="bold">*Note</emphasis>: When a data element removed due to the changing of form structure, all data value that related to this data element will be hiding also. You are no longer seeing the value in the form. </para>
      </section>
    </section>
  </section>
</section>
